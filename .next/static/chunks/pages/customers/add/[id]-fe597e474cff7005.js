(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{8466:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/customers/add/[id]",function(){return n(2206)}])},8631:function(e,t,n){"use strict";n.r(t);var s=n(4246);n(7378);let c=e=>{let{visible:t,children:n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"loader",style:{visibility:"".concat(t)}}),n]})};t.default=c},2206:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s=n(4246),c=n(7833),i=n(9894),l=n.n(i),r=n(6677),a=n(7378),d=n(969),o=n(8631);function h(){let[e,t]=(0,a.useState)({}),[n,i]=(0,a.useState)(),h=(0,r.useRouter)(),{id:u}=h.query,{loader:x,setLoader:m}=function(){let[e,t]=(0,a.useState)("hidden");return{loader:e,setLoader:t}}();return(0,a.useEffect)(()=>{m("visible"),c.Z.get("".concat(d.url,"/api/posts/").concat(u)).then(e=>{t(e.data)}).finally(()=>{m("hidden")})},[]),(0,s.jsx)(o.default,{visible:"".concat(x),children:(0,s.jsxs)("form",{className:"edit-modal",onSubmit:e=>{e.preventDefault()},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)("label",{style:{marginBottom:"5px"},children:"أدخل الرصيد المراد إضافته"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>{i(e.target.value)}})]}),(0,s.jsxs)("div",{className:"buttons",children:[(0,s.jsx)("button",{onClick:()=>{let t;t=e.value+Number(n),m("visible"),c.Z.put("".concat(d.url,"/api/posts/").concat(u),{name:e.name,value:t}).then(e=>{h.push("/customers")}).finally(()=>{m("hidden")})},className:"ok",children:"تم"}),(0,s.jsx)(l(),{href:"/customers",children:(0,s.jsx)("button",{className:"back",children:"تراجع"})})]})]})})}},969:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x},getCost:function(){return u},getPrice:function(){return h},url:function(){return o}});var s=n(4246),c=n(4873),i=n(7833),l=n(9894),r=n.n(l),a=n(7378),d=n(8631);let o="https://alaa-project-nextjs-9hhq.vercel.app",h=e=>1.25*e,u=e=>1.043*e;function x(){let[e,t]=(0,c.cI)("mqazogok");e.succeeded&&alert("تم الارسال بنجاح");let[n,l]=(0,a.useState)([]),{loader:h,setLoader:u}=function(){let[e,t]=(0,a.useState)("hidden");return{loader:e,setLoader:t}}(),x=()=>{u("visible"),i.Z.get("".concat(o,"/api/posts")).then(e=>{l(e.data.sort((e,t)=>{let n=e.name,s=t.name;return n<s?-1:n>s?1:0}))}).finally(()=>{u("hidden")})};async function m(e){window.confirm("هل أنت متأكد من حذف بيانات ".concat(e.name,"  ؟"))&&(u("visible"),i.Z.delete("".concat(o,"/api/posts/").concat(e._id)).then(()=>{x()}).finally(()=>{u("hidden")}))}(0,a.useEffect)(()=>{x()},[]);let j=Object.values(n.reduce((e,t)=>(e[t.name]?(e[t.name].value+=t.value,e[t.name].price+=t.price,e[t.name].cost+=t.cost):e[t.name]={name:t.name,value:t.value,price:t.price,cost:t.cost},e),{})),b="";n.map(e=>(b+="\n    الاسم : ".concat(e.name," \n    قيمة الرصيد : ").concat(e.value," \n    السعر: ").concat(e.price,"\n    التاريخ : ").concat(e.date,"\n    ")+"\n",e));let f=0,p=0,v=0,N="";j.map(e=>(N+="\n        الاسم : ".concat(e.name," \n        المبلغ الكلي: ").concat(e.price,"\n        ")+"\n",f+=e.price,p+=e.cost,v+=e.value,e));let y=j.length,[g,C]=(0,a.useState)(""),[_,k]=(0,a.useState)("abuomarcom4@gmail.com");return n.filter(e=>"رمضان علوش"!=e.name),(0,s.jsxs)(d.default,{visible:h,children:[(0,s.jsxs)("div",{className:"add-customer",children:[(0,s.jsx)("div",{children:(0,s.jsx)(r(),{href:"/customers/addcustomer",children:(0,s.jsx)("button",{children:"إضافة زبون من حيث الرصيد"})})}),(0,s.jsx)("div",{children:(0,s.jsx)(r(),{href:"/customers/add-customer-money",children:(0,s.jsx)("button",{style:{backgroundColor:" #e91e63"},children:"إضافة زبون من حيث المبلغ"})})})]}),(0,s.jsxs)("table",{className:"table-customers",dir:"rtl",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"الاسم"}),(0,s.jsx)("th",{children:"قيمة الرصيد"}),(0,s.jsx)("th",{children:"السعر"}),(0,s.jsx)("th",{children:"التكلفة"}),(0,s.jsx)("th",{children:"التاريخ"}),(0,s.jsx)("th",{children:"الحدث المراد"})]})}),(0,s.jsx)("tbody",{children:n.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.value}),(0,s.jsx)("td",{children:e.price.toFixed(0)}),(0,s.jsx)("td",{children:e.cost.toFixed(0)}),(0,s.jsx)("td",{children:e.date}),(0,s.jsxs)("td",{className:"actions-buttons",children:[(0,s.jsx)("button",{onClick:()=>{m(e)},className:"del-btn",children:"حذف"}),(0,s.jsx)(r(),{href:"/customers/edit/".concat(e._id),children:(0,s.jsx)("button",{className:"edit-btn",children:"تعديل"})}),(0,s.jsx)(r(),{href:"/customers/add/".concat(e._id),children:(0,s.jsx)("button",{className:"add-btn",children:"إضافة رصيد"})}),(0,s.jsx)(r(),{href:"/customers/addcost/".concat(e._id),children:(0,s.jsx)("button",{className:"add-cost-btn",children:"إضافة مبلغ"})})]})]},e._id))})]}),(0,s.jsx)("h3",{style:{marginTop:"30px"},children:"جدول الإحصائيات"}),(0,s.jsxs)("table",{className:"table-customers",dir:"rtl",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"الاسم"}),(0,s.jsx)("th",{children:"قيمة الرصيد"}),(0,s.jsx)("th",{children:"السعر"}),(0,s.jsx)("th",{children:"التكلفة"}),(0,s.jsx)("th",{children:" "})]})}),(0,s.jsx)("tbody",{children:j.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.value}),(0,s.jsx)("td",{children:Number(e.price).toFixed(0)}),(0,s.jsx)("td",{children:Number(e.cost).toFixed(0)}),(0,s.jsx)("td",{className:"actions-buttons",children:(0,s.jsx)("button",{className:"del-btn",onClick:()=>{!function(e){if(confirm("هل انت متأكد من حذف جميع بيانات ".concat(e.name))){let t=n.filter(t=>e.name==t.name);console.log(t),t.forEach(e=>{i.Z.delete("".concat(o,"/api/posts/").concat(e._id)).then(()=>{x()})})}}(e)},children:"حذف"})})]},t))})]}),(0,s.jsxs)("table",{className:"table-customers",style:{backgroundColor:"#ECDFCC",color:"#181C14",fontWeight:"bold",marginBottom:"10px"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:" "}),(0,s.jsx)("th",{children:" عدد الزبائن"}),(0,s.jsx)("th",{children:" الرصيد"}),(0,s.jsx)("th",{children:" الديون"}),(0,s.jsx)("th",{children:" الكلفة"})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"المجموع"}),(0,s.jsx)("td",{children:y}),(0,s.jsx)("td",{children:v}),(0,s.jsx)("td",{children:f}),(0,s.jsx)("td",{children:p.toFixed(0)})]})})]}),(0,s.jsxs)("form",{onSubmit:t,className:"gmail-form",children:[(0,s.jsxs)("div",{className:"desc-buttons",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{C(b)},children:"إرسال كامل البيانات"}),(0,s.jsx)("button",{type:"button",onClick:()=>{C(N)},children:"إرسال البيانات الإحصائية فقط"})]}),(0,s.jsxs)("div",{style:{position:"absolute",visibility:"hidden"},children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,s.jsx)("input",{id:"email",type:"email",name:"email",value:_,onChange:()=>{}}),(0,s.jsx)(c.p8,{prefix:"Email",field:"email",errors:e.errors})]}),(0,s.jsx)("div",{className:"cotainer-textarea",children:(0,s.jsx)("textarea",{id:"message",name:"message",value:g,onChange:e=>{C(e.target.value)}})}),(0,s.jsx)(c.p8,{prefix:"Message",field:"message",errors:e.errors}),(0,s.jsx)("div",{className:"container-submit-btn",children:(0,s.jsx)("button",{id:"submitGmailBtn",type:"submit",disabled:e.submitting,children:"إرسال"})})]})]})}},6677:function(e,t,n){e.exports=n(5949)}},function(e){e.O(0,[749,774,888,179],function(){return e(e.s=8466)}),_N_E=e.O()}]);