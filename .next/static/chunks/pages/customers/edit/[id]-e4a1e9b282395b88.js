(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{4385:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/customers/edit/[id]",function(){return s(2141)}])},2141:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var n=s(5893),c=s(7066),r=s(1664),i=s.n(r),l=s(1163),a=s(7294),d=s(2340);function o(){(0,a.useEffect)(()=>{c.Z.get("".concat(d.url,"/api/posts/").concat(t)).then(e=>{r(e.data.name),h(e.data.value)})},[]);let e=(0,l.useRouter)(),{id:t}=e.query,[s,r]=(0,a.useState)(""),[o,h]=(0,a.useState)(""),u=e=>{e.preventDefault()};return(0,n.jsx)("div",{children:(0,n.jsxs)("form",{className:"edit-modal",onSubmit:u,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"name"}),(0,n.jsx)("input",{type:"text",value:s,onChange:e=>{r(e.target.value)}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"value"}),(0,n.jsx)("input",{type:"text",value:o,onChange:e=>{h(e.target.value)}})]}),(0,n.jsxs)("div",{className:"buttons",children:[(0,n.jsx)("button",{onClick:()=>{!function(t){c.Z.put("".concat(d.url,"/api/posts/").concat(t),{name:s,value:Number(o)}).then(()=>{e.push("/customers")}).finally(()=>{})}(t)},className:"ok",children:"تم"}),(0,n.jsx)(i(),{href:"/customers",children:(0,n.jsx)("button",{className:"back",children:"تراجع"})})]})]})})}},2340:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u},getCost:function(){return h},getPrice:function(){return o},url:function(){return d}});var n=s(5893),c=s(3556),r=s(7066),i=s(1664),l=s.n(i),a=s(7294);let d="https://alaa-project-nextjs-9hhq.vercel.app/customers",o=e=>1.25*e,h=e=>1.043*e;function u(){let[e,t]=(0,c.cI)("mqazogok");e.succeeded&&alert("تم الارسال بنجاح");let[s,i]=(0,a.useState)([]),o=()=>{r.Z.get("".concat(d,"/api/posts")).then(e=>{i(e.data.sort((e,t)=>{let s=e.name,n=t.name;return s<n?-1:s>n?1:0}))}).finally(()=>{})};async function h(e){window.confirm("هل أنت متأكد من حذف بيانات ".concat(e.name,"  ؟"))&&r.Z.delete("".concat(d,"/api/posts/").concat(e._id)).then(()=>{o()}).finally(()=>{})}(0,a.useEffect)(()=>{o()},[]);let u=Object.values(s.reduce((e,t)=>(e[t.name]?(e[t.name].value+=t.value,e[t.name].price+=t.price,e[t.name].cost+=t.cost):e[t.name]={name:t.name,value:t.value,price:t.price,cost:t.cost},e),{})),x="";s.map(e=>(x+="\n    الاسم : ".concat(e.name," \n    قيمة الرصيد : ").concat(e.value," \n    السعر: ").concat(e.price,"\n    التاريخ : ").concat(e.date,"\n    ")+"\n",e));let m=0,j=0,b=0,p="";u.map(e=>(p+="\n        الاسم : ".concat(e.name," \n        المبلغ الكلي: ").concat(e.price,"\n        ")+"\n",m+=e.price,j+=e.cost,b+=e.value,e));let f=u.length,[v,g]=(0,a.useState)(""),[N,y]=(0,a.useState)("abuomarcom4@gmail.com");return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"add-customer",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l(),{href:"/customers/addcustomer",children:(0,n.jsx)("button",{children:"إضافة زبون من حيث الرصيد"})})}),(0,n.jsx)("div",{children:(0,n.jsx)(l(),{href:"/customers/add-customer-money",children:(0,n.jsx)("button",{style:{backgroundColor:" #e91e63"},children:"إضافة زبون من حيث المبلغ"})})})]}),(0,n.jsxs)("table",{className:"table-customers",dir:"rtl",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"الاسم"}),(0,n.jsx)("th",{children:"قيمة الرصيد"}),(0,n.jsx)("th",{children:"السعر"}),(0,n.jsx)("th",{children:"التكلفة"}),(0,n.jsx)("th",{children:"التاريخ"}),(0,n.jsx)("th",{children:"الحدث المراد"})]})}),(0,n.jsx)("tbody",{children:s.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.value}),(0,n.jsx)("td",{children:e.price.toFixed(0)}),(0,n.jsx)("td",{children:e.cost.toFixed(0)}),(0,n.jsx)("td",{children:e.date}),(0,n.jsxs)("td",{className:"actions-buttons",children:[(0,n.jsx)("button",{onClick:()=>{h(e)},className:"del-btn",children:"حذف"}),(0,n.jsx)(l(),{href:"/customers/edit/".concat(e._id),children:(0,n.jsx)("button",{className:"edit-btn",children:"تعديل"})}),(0,n.jsx)(l(),{href:"/customers/add/".concat(e._id),children:(0,n.jsx)("button",{className:"add-btn",children:"إضافة رصيد"})}),(0,n.jsx)(l(),{href:"/customers/addcost/".concat(e._id),children:(0,n.jsx)("button",{className:"add-cost-btn",children:"إضافة مبلغ"})})]})]},e._id))})]}),(0,n.jsx)("h3",{style:{marginTop:"30px"},children:"جدول الإحصائيات"}),(0,n.jsxs)("table",{className:"table-customers",dir:"rtl",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"الاسم"}),(0,n.jsx)("th",{children:"قيمة الرصيد"}),(0,n.jsx)("th",{children:"السعر"}),(0,n.jsx)("th",{children:"التكلفة"})]})}),(0,n.jsx)("tbody",{children:u.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.value}),(0,n.jsx)("td",{children:Number(e.price).toFixed(0)}),(0,n.jsx)("td",{children:Number(e.cost).toFixed(0)})]},t))})]}),(0,n.jsxs)("table",{className:"table-customers",style:{backgroundColor:"#ECDFCC",color:"#181C14",fontWeight:"bold",marginBottom:"10px"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:" "}),(0,n.jsx)("th",{children:" عدد الزبائن"}),(0,n.jsx)("th",{children:" الرصيد"}),(0,n.jsx)("th",{children:" الديون"}),(0,n.jsx)("th",{children:" الكلفة"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"المجموع"}),(0,n.jsx)("td",{children:f}),(0,n.jsx)("td",{children:b}),(0,n.jsx)("td",{children:m}),(0,n.jsx)("td",{children:j.toFixed(0)})]})})]}),(0,n.jsxs)("form",{onSubmit:t,className:"gmail-form",children:[(0,n.jsxs)("div",{className:"desc-buttons",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{g(x)},children:"إرسال كامل البيانات"}),(0,n.jsx)("button",{type:"button",onClick:()=>{g(p)},children:"إرسال البيانات الإحصائية فقط"})]}),(0,n.jsxs)("div",{style:{position:"absolute",visibility:"hidden"},children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,n.jsx)("input",{id:"email",type:"email",name:"email",value:N,onChange:()=>{}}),(0,n.jsx)(c.p8,{prefix:"Email",field:"email",errors:e.errors})]}),(0,n.jsx)("div",{className:"cotainer-textarea",children:(0,n.jsx)("textarea",{id:"message",name:"message",value:v,onChange:e=>{g(e.target.value)}})}),(0,n.jsx)(c.p8,{prefix:"Message",field:"message",errors:e.errors}),(0,n.jsx)("div",{className:"container-submit-btn",children:(0,n.jsx)("button",{id:"submitGmailBtn",type:"submit",disabled:e.submitting,children:"إرسال"})})]})]})}},1163:function(e,t,s){e.exports=s(6885)}},function(e){e.O(0,[680,774,888,179],function(){return e(e.s=4385)}),_N_E=e.O()}]);